<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ejercicio 1 David Amate López - Fecha</title>
    <style>
        body {
            font-family: Verdana;
            background: #e8f4f8;
            padding: 50px;
            text-align: center;
        }

        .box {
            background: #fff;
            max-width: 400px;
            margin: auto;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        h2 {
            color: #0066cc;
            margin-bottom: 20px;
        }

        button {
            background: #0066cc;
            color: #fff;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background: #0052a3;
        }
    </style>
</head>
<body>
    <div class="box">
        <h2>Información de Fecha</h2>
        <button id="btnAbrir">Abrir Ventana</button>
    </div>

    <script>
        // Capturamos el evento click del botón
        document.getElementById('btnAbrir').addEventListener('click', function() {
            
            // 1. Obtenemos la fecha actual usando el objeto Date
            var hoy = new Date();
            
            // 2. Extraemos día, mes y año
            var dia = hoy.getDate();
            var mes = hoy.getMonth() + 1; // getMonth() devuelve 0-11, sumamos 1
            var anio = hoy.getFullYear();
            
            // 3. Calculamos días que faltan para fin de año
            // Creamos una fecha para el 31 de diciembre del año actual
            var finAnio = new Date(anio, 11, 31); // mes 11 = diciembre (0-11)
            
            // Calculamos la diferencia en milisegundos
            var diferenciaMilisegundos = finAnio - hoy;
            
            // Convertimos milisegundos a días
            var diasRestantes = Math.ceil(diferenciaMilisegundos / (1000 * 60 * 60 * 24));
            
            // 4. Construimos el mensaje
            var mensaje = "Hoy es " + dia + "/" + mes + "/" + anio + 
                         " y faltan " + diasRestantes + " días para fin de año";
            
            // 5. Abrimos una ventana nueva de 600x400
            var ventana = window.open('', 'ventanaFecha', 'width=600,height=400');
            
            // 6. Escribimos en la ventana nueva
            ventana.document.write('<html><head><title>Fecha</title>');
            ventana.document.write('<style>');
            ventana.document.write('body { font-family: Verdana; padding: 50px; text-align: center; background: #f0f8ff; }');
            ventana.document.write('h1 { color: #0066cc; }');
            ventana.document.write('</style></head><body>');
            ventana.document.write('<h1>' + mensaje + '</h1>');
            ventana.document.write('</body></html>');
            
            // Cerramos el documento para que se renderice
            ventana.document.close();
        });
    </script>
</body>
</html>